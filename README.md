Домашнее задание к занятию «Базы данных»

Инструкция по выполнению домашнего задания

Сделайте fork репозитория c шаблоном решения к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/gitlab-hw или https://github.com/имя-вашего-репозитория/8-03-hw).
Выполните клонирование этого репозитория к себе на ПК с помощью команды git clone.
Выполните домашнее задание и заполните у себя локально этот файл README.md:
впишите вверху название занятия и ваши фамилию и имя;
в каждом задании добавьте решение в требуемом виде: текст/код/скриншоты/ссылка;
для корректного добавления скриншотов воспользуйтесь инструкцией «Как вставить скриншот в шаблон с решением»;
при оформлении используйте возможности языка разметки md. Коротко об этом можно посмотреть в инструкции по MarkDown.
После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin).
Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
Любые вопросы задавайте в чате учебной группы и/или в разделе «Вопросы по заданию» в личном кабинете.
Желаем успехов в выполнении домашнего задания.

Легенда

Заказчик передал вам файл в формате Excel, в котором сформирован отчёт.

На основе этого отчёта нужно выполнить следующие задания.

Задание 1

Опишите не менее семи таблиц, из которых состоит база данных:

какие данные хранятся в этих таблицах;
какой тип данных у столбцов в этих таблицах, если данные хранятся в PostgreSQL.
Приведите решение к следующему виду:

Сотрудники (

идентификатор, первичный ключ, serial,
фамилия varchar(50),
...
идентификатор структурного подразделения, внешний ключ, integer).
Дополнительные задания (со звёздочкой*)

Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

{Овтет:
Сотрудники (
    идентификатор serial PRIMARY KEY,
    фамилия varchar(50),
    имя varchar(50),
    отчество varchar(50),
    должность_id integer REFERENCES Должности(идентификатор),
    подразделение_id integer REFERENCES Подразделения(идентификатор),
    дата_найма date,
    оклад numeric(10,2)
);
Должности (
    идентификатор serial PRIMARY KEY,
    название varchar(100)
);
Типы_подразделений (
    идентификатор serial PRIMARY KEY,
    тип varchar(50)
);
Подразделения (
    идентификатор serial PRIMARY KEY,
    название varchar(200),
    тип_подразделения_id integer REFERENCES Типы_подразделений(идентификатор),
    адрес_филиала_id integer REFERENCES Адреса(идентификатор)
);
Адреса (
    идентификатор serial PRIMARY KEY,
    регион varchar(100),
    город varchar(100),
    улица varchar(200),
    дом varchar(20)
);
Проекты (
    идентификатор serial PRIMARY KEY,
    название varchar(300)
);
Назначения_на_проекты (
    сотрудник_id integer REFERENCES Сотрудники(идентификатор),
    проект_id integer REFERENCES Проекты(идентификатор),
    PRIMARY KEY (сотрудник_id, проект_id)
);}

Задание 2*

Перечислите, какие, на ваш взгляд, в этой денормализованной таблице встречаются функциональные зависимости и какие правила вывода нужно применить, чтобы нормализовать данные.

Ответ:
функциональные зависимости в исходной таблице:

ФИО сотрудника → Оклад, Должность, Тип подразделения, Структурное подразделение, Дата найма, Адрес филиала
Это основная зависимость, но она избыточна из-за денормализации.

Структурное подразделение → Тип подразделения, Адрес филиала
Каждое подразделение относится к одному типу и расположено по одному адресу.

Должность → (не зависит однозначно от других полей)
Должность — самостоятельная сущность, повторяется у разных сотрудников.

Адрес филиала → Город, Регион, Улица, Дом
Адрес можно разбить на составные части, но в рамках задания может храниться как текст.

Проект на который назначен → (не зависит от сотрудника однозначно)
Проект — отдельная сущность, связь «многие-ко-многим» с сотрудниками.

Правила вывода для нормализации:

Удаление повторяющихся групп
→ Проекты выносятся в отдельную таблицу, создаётся таблица связей.
Устранение транзитивных зависимостей
→ Структурное подразделение зависит от сотрудника, но тип подразделения и адрес зависят от подразделения, а не от сотрудника напрямую.
→ Выносим Подразделения, Типы подразделений, Адреса в отдельные таблицы.
Устранение частичных зависимостей
→ Должность может повторяться у разных сотрудников → выносим в справочник Должности.
Создание первичных ключей и связей
→ Вводим суррогатные ключи (serial) для удобства связей.

Приведение к 3НФ (третьей нормальной форме)
В каждой таблице остаются только атрибуты, зависящие от ключа.
Нет транзитивных зависимостей.
Все неключевые атрибуты зависят только от первичного ключа.
